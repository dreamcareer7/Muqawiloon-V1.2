<div class="js-admin-stats">
  <div class="card">

    <div class="card__section card__section--border">
      <div class="grid grid--middle">
        <div class="grid__col--xs-12 grid__col--md-8 grid__col--lg-9">
          <h3><%= inline_svg("icons/graph.svg", class: "icon icon--dark icon--small") %>
            <span class="u-text-light u-text-regular">Statistics / </span>
            Engagement
          </h3>
        </div>
        <div class="grid__col--xs-12 grid__col--md-4 grid__col--lg-1">
          <p style="margin-right: 10px; display: none;" class="js-stats-loading">Loading...</p>
        </div>
        <div class="grid__col--xs-12 grid__col--md-4 grid__col--lg-2">
          <div class="field">
            <div class="field__input-wrapper">
              <%= inline_svg("icons/dropdown.svg", class: "icon field__add-on field__add-on--right field__add-on--clickthrough") %>
              <select class="field__input field__input--right-add-on js-stats-time-range">
                <% filter_time_ranges.each do |range| %>
                  <option value="<%= range[:from].to_i %>-<%= range[:to].to_i %>"<%= ' selected' if range[:default] %>><%= range[:title] %></option>
                <% end %>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="card__section card__section--border">
      <div class="card__header">
        <h4 class="card__title">User interest</h4>
      </div>
      <div class="grid">
        <div class="grid__col--xs-6 grid__col--sm-4 grid__col--lg-3 grid__col--xlg-2">
          <p class="mb0"><%= t("stats.phone_calls") %></p>
          <h2 class="m0" rv-text="stats.phone_calls"></h2>
        </div>
        <div class="grid__col--xs-6 grid__col--sm-4 grid__col--lg-3 grid__col--xlg-2">
          <p class="mb0"><%= t("stats.website_visits") %></p>
          <h2 class="m0" rv-text="stats.website_visits">-</h2>
        </div>
        <div class="grid__col--xs-6 grid__col--sm-4 grid__col--lg-3 grid__col--xlg-2">
          <p class="mb0"><%= t("stats.social_media_visits") %></p>
          <h2 class="m0" rv-text="stats.social_media_visits">-</h2>
        </div>
      </div>
    </div>

    <div class="card__section card__section--border">
      <div class="js-stats-graph" data-series="interest"></div>
    </div>

    <div class="card__section card__section--border">
      <div class="card__header">
        <h4 class="card__title">Communications</h4>
      </div>
      <div class="grid">
        <div class="grid__col--xs-6 grid__col--sm-4 grid__col--lg-3 grid__col--xlg-2">
          <p class="mb0"><%= t("stats.callback_requests") %></p>
          <h2 class="m0" rv-text="stats.callback_requests">-</h2>
        </div>
        <div class="grid__col--xs-6 grid__col--sm-4 grid__col--lg-3 grid__col--xlg-2">
          <p class="mb0"><%= t("stats.messages_by_users") %></p>
          <h2 class="m0" rv-text="stats.messages_by_users">-</h2>
        </div>
        <div class="grid__col--xs-6 grid__col--sm-4 grid__col--lg-3 grid__col--xlg-2">
          <p class="mb0"><%= t("stats.responses_by_businesses") %></p>
          <h2 class="m0" rv-text="stats.responses_by_businesses">-</h2>
        </div>
      </div>
    </div>

    <div class="card__section card__section--border">
      <div class="js-stats-graph" data-series="outreach"></div>
    </div>

  </div>
</div>

<% content_for :page_scripts do %>
  <%= javascript_include_tag 'business-stats' %>

  <script>
    initStats({ endpointModule: 'engagement' })
  </script>
<% end %>